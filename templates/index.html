<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> AutoDrive Luxury Collection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', Roboto, "Ubuntu Sans", Arial, sans-serif;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }

        table,
        th,
        td {
            border: 1px solid rgba(203, 213, 225, 0.3);
            border-collapse: collapse;
        }

        th,
        td {
            padding: 5px;
        }

        a:visited {
            color: #2563eb;
        }

        /* Gradient background */
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            background-attachment: fixed;
        }

        /* Glass morphism effect */
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Premium gold accents */
        .gold-gradient {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .gold-text {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Animated shine effect */
        @keyframes shine {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        .shine {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            background-size: 200% 100%;
            animation: shine 3s infinite;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
        }

        /* Table hover glow */
        .table-row-hover:hover {
            background: linear-gradient(90deg, rgba(245, 158, 11, 0.05) 0%, rgba(245, 158, 11, 0.1) 50%, rgba(245, 158, 11, 0.05) 100%);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.1);
        }
    </style>
    <script>
        function getSearch() {
            const searchTerm = document.querySelector("#search").value.toLowerCase();
            console.log(searchTerm)
            
            // Only search if searchTerm length is greater than 2
            if (searchTerm.length > 2) {
                fetch("/api/cars/search", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ title: searchTerm }),
                })
                    .then((response) => response.json())
                    .then((cars) => {
                        console.log(cars);
                        let html = ``;
                        cars.forEach((car) => {
                            html += `<tr class="table-row-hover transition-all duration-300 border-b border-slate-200">
                            <td class="px-6 py-4 text-center font-semibold text-slate-700">${car.carid}</td>
                            <td class="px-6 py-4"><a href="#!" onclick="handleClick(${car.carid})" class="text-amber-600 hover:text-amber-700 font-medium hover:underline decoration-2 decoration-amber-500 underline-offset-4 transition-all">${car.title}</a></td>
                            <td class="px-6 py-4 text-center"><span class="inline-block px-4 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md">${car.status}</span></td>
                        </tr>`;
                        });
                        document.querySelector("tbody").innerHTML = html;
                    });
            } else if (searchTerm.length === 0) {
                // If search is cleared, show all cars
                fetchCars();
            }
        }
        function handleSave() {
            updated_car = {
                carid: document.querySelector("#carid").value,
                title: document.querySelector("#title").value,
                status: document.querySelector("#status").value,
            };

            fetch('/api/cars/save', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(updated_car),
            })
                .then((response) => response.json())
                .then((data) => {
                    console.log('Success:', data);
                    document.querySelector("#edit").style.display = "none";
                    fetchCars();
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }

        function handleClick(carId) {
            // alert(carId);
            fetch(`/api/cars/${carId}`)
                .then((response) => response.json())
                .then((data) => {
                    // alert(`CarId: ${data.carid}\nTitle: ${data.title}`);
                    document.querySelector("#edit").style.display = "block";
                    let html = `<tr class="border-b border-slate-200">
                        <th class="px-6 py-4 text-left bg-gradient-to-r from-slate-50 to-slate-100 font-semibold text-slate-700 uppercase text-xs tracking-wider">CarId</th>
                        <td class="px-6 py-4 bg-white">
                            <span class="font-bold text-amber-600 text-lg">${data.carid}</span>
                            <input type="hidden" id="carid" value="${data.carid}"/>
                        </td>
                    </tr>
                    <tr class="border-b border-slate-200">
                    <th class="px-6 py-4 text-left bg-gradient-to-r from-slate-50 to-slate-100 font-semibold text-slate-700 uppercase text-xs tracking-wider">Title</th>
                        <td class="px-6 py-4 bg-white">
                            <textarea id="title" rows="3" cols="30" class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all shadow-sm hover:border-amber-300 font-medium text-slate-700">${data.title}</textarea>
                        </td>
                    </tr>
                    <tr class="border-b border-slate-200">
                        <th class="px-6 py-4 text-left bg-gradient-to-r from-slate-50 to-slate-100 font-semibold text-slate-700 uppercase text-xs tracking-wider">Status</th>
                        <td class="px-6 py-4 bg-white">
                            <input type="text" id="status" value="${data.status}" class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all shadow-sm hover:border-amber-300 font-medium text-slate-700"/>
                        </td>
                    </tr>                    
                    <tr>
                        <td colspan="2" class="px-6 py-6 text-center bg-gradient-to-b from-white to-slate-50">
                            <button type="submit" onclick="handleSave()" class="bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-bold px-8 py-3 rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 uppercase tracking-wide text-sm">Save Changes</button>
                        </td>
                    </tr>`;
                    document.querySelector("#edit tbody").innerHTML = html;
                });
        }

        function fetchCars() {
            fetch("/api/cars")
                .then((response) => response.json())
                .then((data) => {
                    console.log(data);
                    cars = data;
                    let html = ``;
                    cars.forEach((car) => {
                        html += `<tr class="table-row-hover transition-all duration-300 border-b border-slate-200">
                            <td class="px-6 py-4 text-center font-semibold text-slate-700">${car.carid}</td>
                            <td class="px-6 py-4"><a href="#!" onclick="handleClick(${car.carid})" class="text-amber-600 hover:text-amber-700 font-medium hover:underline decoration-2 decoration-amber-500 underline-offset-4 transition-all">${car.title}</a></td>
                            <td class="px-6 py-4 text-center"><span class="inline-block px-4 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md">${car.status}</span></td>
                        </tr>`;
                    });
                    document.querySelector("tbody").innerHTML = html;
                });
        }
        fetchCars();
    </script>
</head>

<body class="min-h-screen">
    <!-- Decorative elements -->
    <div class="fixed top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-400 via-amber-500 to-amber-600 z-50"></div>
    
    <div class="container mx-auto px-4 py-12 max-w-7xl">
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-bold mb-4 gold-text">AutoDrive</h1>
            <p class="text-slate-300 text-lg font-light tracking-wide">Luxury Collection Management</p>
            <div class="w-24 h-1 bg-gradient-to-r from-transparent via-amber-500 to-transparent mx-auto mt-4"></div>
        </div>

        <!-- Search Bar -->
        <div class="mb-8 flex justify-center">
            <input type="text" name="search" id="search" placeholder="Search your luxury collection..." oninput="getSearch()" class="w-full md:w-2/3 lg:w-1/2 px-6 py-4 glass rounded-2xl shadow-2xl focus:outline-none focus:ring-4 focus:ring-amber-500/50 placeholder-slate-400 text-slate-700 font-medium text-base border-2 border-white/30 hover:border-amber-400/50 transition-all" />
        </div>
        
        <div style="display: flex" class="flex-col xl:flex-row gap-8">
            <!-- Main Cars Table -->
            <div class="flex-1 glass rounded-3xl shadow-2xl p-8 border-2 border-white/30">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-4xl font-bold text-slate-800">Collection</h2>
                    <div class="w-16 h-1 bg-gradient-to-r from-amber-400 to-amber-600 rounded-full"></div>
                </div>
                
                <div class="overflow-hidden rounded-2xl shadow-xl border border-slate-200">
                    <table class="w-full border-none">
                        <thead class="bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-white">
                            <tr>
                                <th class="px-6 py-5 text-center font-bold uppercase text-sm tracking-wider">ID</th>
                                <th style="width: 550px;" class="px-6 py-5 text-left font-bold uppercase text-sm tracking-wider">Vehicle Details</th>
                                <th class="px-6 py-5 text-center font-bold uppercase text-sm tracking-wider">Status</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-slate-200"></tbody>
                    </table>
                </div>
            </div>
            
            <!-- Edit Panel -->
            <div id="edit" style="display: none;" class="xl:w-[450px] glass rounded-3xl shadow-2xl p-8 border-2 border-white/30 transform transition-all">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-4xl font-bold text-slate-800">Edit Details</h2>
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                    </div>
                </div>

                <div class="overflow-hidden rounded-2xl shadow-xl border border-slate-200">
                    <table id="edit" class="w-full border-none">
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Premium Footer -->
    <footer class="relative mt-20 py-16 bg-gradient-to-b from-slate-900 to-black text-white overflow-hidden">
        <!-- Decorative top border -->
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-amber-500 to-transparent"></div>
        
        <!-- Background pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute inset-0" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,.05) 10px, rgba(255,255,255,.05) 20px);"></div>
        </div>
        
        <div class="container mx-auto px-4 text-center relative z-10">
            <h3 class="text-4xl md:text-5xl font-bold mb-3 gold-text">AutoDrive Cars</h3>
            <div class="w-24 h-1 bg-gradient-to-r from-transparent via-amber-500 to-transparent mx-auto mb-6"></div>
            <p class="text-slate-300 mb-2 text-lg font-light tracking-wide">Driving innovation. Powering the future.</p>
            <p class="text-slate-400 text-sm mb-3 font-light">Â© 2026 AutoDrive Cars. All rights reserved.</p>
            <p class="text-amber-500 text-sm font-medium tracking-wide">Created by: Ajay Kumar &amp; Vaneesh Kumar</p>
            
            <!-- Decorative element -->
            <div class="mt-8 flex justify-center gap-2">
                <div class="w-2 h-2 rounded-full bg-amber-500 animate-pulse"></div>
                <div class="w-2 h-2 rounded-full bg-amber-500 animate-pulse" style="animation-delay: 0.2s;"></div>
                <div class="w-2 h-2 rounded-full bg-amber-500 animate-pulse" style="animation-delay: 0.4s;"></div>
            </div>
        </div>
    </footer>

</body>

</html>
